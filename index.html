<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Nomad Visa Matcher</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Analytics Gtag Script -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6N573S8D8S"></script>
    <script>
        // Initialize the dataLayer
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}

        // Set default consent to 'denied'
        gtag('consent', 'default', {
            'analytics_storage': 'denied'
        });
        
        // This function will be called by React after user gives consent
        function initGoogleAnalytics() {
            gtag('consent', 'update', {
                'analytics_storage': 'granted'
            });
            gtag('js', new Date());
            gtag('config', 'G-6N573S8D8S');
            console.log("Google Analytics Initialized");
        }
    </script>
    
    <style>
        body {
            background-color: #0f172a; /* Corresponds to slate-900 */
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #334155; } /* slate-700 */
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #8b5cf6; border-radius: 10px; } /* purple-500 */
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #7c3aed; } /* purple-600 */
        /* Tooltip style */
        .group:hover .group-hover\:block {
            display: block;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- The React application code goes inside this script tag -->
    <script type="text/babel">
        // --- DATA ---
        // Data is now fetched dynamically, not hardcoded.

        const worldNationalities = [
          "Afghan", "Albanian", "Algerian", "American", "Andorran", "Angolan", "Argentine", "Armenian", "Australian", "Austrian", "Azerbaijani", "Bahamian", "Bahraini", "Bangladeshi", "Barbadian", "Belarusian", "Belgian", "Belizean", "Beninese", "Bhutanese", "Bolivian", "Bosnian", "Brazilian", "British", "Bruneian", "Bulgarian", "Burkinabe", "Burmese", "Burundian", "Cambodian", "Cameroonian", "Canadian", "Cape Verdean", "Central African", "Chadian", "Chilean", "Chinese", "Colombian", "Comoran", "Congolese", "Costa Rican", "Croatian", "Cuban", "Cypriot", "Czech", "Danish", "Djiboutian", "Dominican", "Dutch", "Ecuadorean", "Egyptian", "Emirati", "Equatorial Guinean", "Eritrean", "Estonian", "Ethiopian", "Fijian", "Filipino", "Finnish", "French", "Gabonese", "Gambian", "Georgian", "German", "Ghanaian", "Greek", "Grenadian", "Guatemalan", "Guinean", "Guyanese", "Haitian", "Honduran", "Hungarian", "Icelander", "Indian", "Indonesian", "Iranian", "Iraqi", "Irish", "Israeli", "Italian", "Ivorian", "Jamaican", "Japanese", "Jordanian", "Kazakhstani", "Kenyan", "Kuwaiti", "Kyrgyz", "Laotian", "Latvian", "Lebanese", "Liberian", "Libyan", "Liechtensteiner", "Lithuanian", "Luxembourger", "Macedonian", "Malagasy", "Malawian", "Malaysian", "Maldivian", "Malian", "Maltese", "Marshallese", "Mauritanian", "Mauritian", "Mexican", "Micronesian", "Moldovan", "Monacan", "Mongolian", "Montenegrin", "Moroccan", "Mozambican", "Namibian", "Nauruan", "Nepalese", "New Zealander", "Nicaraguan", "Nigerian", "Nigerien", "North Korean", "Norwegian", "Omani", "Pakistani", "Palauan", "Panamanian", "Papua New Guinean", "Paraguayan", "Peruvian", "Polish", "Portuguese", "Qatari", "Romanian", "Russian", "Rwandan", "Saint Lucian", "Salvadoran", "Samoan", "San Marinese", "Sao Tomean", "Saudi", "Scottish", "Senegalese", "Serbian", "Seychellois", "Sierra Leonean", "Singaporean", "Slovak", "Slovenian", "Solomon Islander", "Somali", "South African", "South Korean", "Spanish", "Sri Lankan", "Sudanese", "Surinamer", "Swazi", "Swedish", "Swiss", "Syrian", "Taiwanese", "Tajik", "Tanzanian", "Thai", "Togolese", "Tongan", "Trinidadian", "Tunisian", "Turkish", "Tuvaluan", "Ugandan", "Ukrainian", "Uruguayan", "Uzbekistani", "Venezuelan", "Vietnamese", "Welsh", "Yemenite", "Zambian", "Zimbabwean"
        ].sort();

        const COUNTRY_CODE_MAP = {
            'Albania': 'AL', 'Andorra': 'AD', 'Argentina': 'AR', 'Armenia': 'AM', 'Australia': 'AU', 'Austria': 'AT', 'Brazil': 'BR', 'Canada': 'CA', 'Chile': 'CL', 'Colombia': 'CO', 'Croatia': 'HR', 'Cyprus': 'CY', 'Estonia': 'EE', 'Germany': 'DE', 'Greece': 'GR', 'Hungary': 'HU', 'Iceland': 'IS', 'Indonesia': 'ID', 'Ireland': 'IE', 'Italy': 'IT', 'Japan': 'JP', 'Malaysia': 'MY', 'Malta': 'MT', 'Mauritius': 'MU', 'Mexico': 'MX', 'Montenegro': 'ME', 'Netherlands': 'NL', 'New Zealand': 'NZ', 'Norway': 'NO', 'Panama': 'PA', 'Philippines': 'PH', 'Portugal': 'PT', 'Romania': 'RO', 'South Africa': 'ZA', 'South Korea': 'KR', 'Spain': 'ES', 'Thailand': 'TH', 'UAE': 'AE'
        };
        function getCountryFlagEmoji(countryName) {
            const countryCode = COUNTRY_CODE_MAP[countryName];
            if (!countryCode) return 'üè≥Ô∏è';
            return String.fromCodePoint(...[...countryCode.toUpperCase()].map(char => char.charCodeAt(0) + 127397));
        }

        const incomeLevels = [
            { label: "Any Income", value: "any", userIncomeForMatch: null },
            { label: "< $1k", value: "0-999", userIncomeForMatch: 999 },
            { label: "$1-2k", value: "1000-1999", userIncomeForMatch: 1999 },
            { label: "$2-3k", value: "2000-2999", userIncomeForMatch: 2999 },
            { label: "$3-5k", value: "3000-4999", userIncomeForMatch: 4999 },
            { label: "$5k+", value: "5000+", userIncomeForMatch: Infinity }
        ];

        const workStyles = [
            { label: "Any", value: "Any", icon: "üåê" },
            { label: "Employee", value: "employee", icon: "üë®‚Äçüíº" },
            { label: "Freelancer", value: "freelancer", icon: "üßë‚Äçüé®" },
            { label: "Business Owner", value: "business_owner", icon: "üï¥Ô∏è" }
        ];

        const getScoreAttributes = (score, type = 'standard') => {
            const standardDesc = ['Very Poor', 'Poor', 'Average', 'Good', 'Excellent'];
            const reversedDesc = ['Very Low', 'Low', 'Moderate', 'High', 'Very High'];
            const sentimentDesc = ['Very Negative', 'Negative', 'Mixed', 'Positive', 'Very Positive'];
            const sentimentEmoji = ['üò°', 'üò†', 'üòê', 'üòä', 'üòç'];
            const colors = ['bg-red-500', 'bg-orange-500', 'bg-yellow-500', 'bg-lime-500', 'bg-green-500'];
            if (score === null || score === undefined || score < 1 || score > 5) {
                return { description: 'N/A', color: 'bg-slate-600', percentage: 0, emoji: 'ü§î' };
            }
            const index = Math.round(score) - 1;
            const isReversed = type === 'cost' || type === 'bureaucracy';
            let description, emoji;
            if (type === 'sentiment') {
                description = sentimentDesc[index];
                emoji = sentimentEmoji[index];
            } else {
                description = isReversed ? reversedDesc[index] : standardDesc[index];
                emoji = '';
            }
            return { description, emoji, color: isReversed ? colors.slice().reverse()[index] : colors[index], percentage: (score / 5) * 100 };
        };

        const legalContent = {
            terms: {
                title: 'Terms of Use',
                content: `Welcome to our Digital Nomad Visa Matcher. The information provided on this website is for general informational purposes only. All information on the site is provided in good faith, however, we make no representation or warranty of any kind, express or implied, regarding the accuracy, adequacy, validity, reliability, availability, or completeness of any information on the site.\nVisa and immigration laws are complex and change frequently. You should not rely on the information on this website as a substitute for professional legal or immigration advice. Always consult with a qualified professional for advice tailored to your specific situation. Your use of the site is solely at your own risk. For any questions, please contact us at 10mvpsin20days@gmail.com.`
            },
            privacy: {
                title: 'Privacy Policy',
                content: `This Privacy Policy describes how we handle your information. We use Google Analytics to collect anonymous data about your usage of this site to help us improve the user experience. This includes information like which features are used most often and how users navigate the site. This data is aggregated and does not personally identify you.\nWe do not collect any other personal information. If you have any questions about our privacy practices, please contact us at 10mvpsin20days@gmail.com.`
            }
        };

        function App() {
            const [visaData, setVisaData] = React.useState(null);
            const [isLoading, setIsLoading] = React.useState(true);
            const [error, setError] = React.useState(null);
            
            const [selectedNationality, setSelectedNationality] = React.useState('');
            const [selectedIncomeValue, setSelectedIncomeValue] = React.useState("any");
            const [selectedWorkStyle, setSelectedWorkStyle] = React.useState('Any');
            const [filteredVisas, setFilteredVisas] = React.useState([]);
            const [modalContent, setModalContent] = React.useState(null);
            const [legalModalContent, setLegalModalContent] = React.useState(null);
            const [showBanner, setShowBanner] = React.useState(false);

            React.useEffect(() => {
                // Fetch visa data from the JSON file
                fetch('/data/data_v1.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        setVisaData(data);
                    })
                    .catch(error => {
                        console.error('Error fetching visa data:', error);
                        setError('Could not load visa data. Please try again later.');
                    })
                    .finally(() => {
                        setIsLoading(false);
                    });

                // Check for GA consent in localStorage
                if (localStorage.getItem('ga_consent') !== 'true') {
                    setShowBanner(true);
                } else {
                    initGoogleAnalytics(); // Init on load if already consented
                }
            }, []);

            React.useEffect(() => {
                if (!selectedNationality || !visaData) {
                    setFilteredVisas([]);
                    return;
                }
                const currentIncomeOption = incomeLevels.find(level => level.value === selectedIncomeValue);
                const userIncomeForMatch = currentIncomeOption?.userIncomeForMatch;
                const results = visaData.visas.filter(visa => {
                    const nationalityMatch = visa.allowed_passports.includes("All") || visa.allowed_passports.includes(selectedNationality);
                    if (!nationalityMatch) return false;
                    let incomeMatch = true;
                    if (userIncomeForMatch !== null && visa.min_income_usd !== null) {
                        incomeMatch = userIncomeForMatch === Infinity || visa.min_income_usd <= userIncomeForMatch;
                    }
                    if (!incomeMatch) return false;
                    let workStyleMatch = true;
                    if (selectedWorkStyle !== 'Any') {
                        const visaEmploymentTypes = visa.employment_type?.map(type => type.toLowerCase()) || [];
                        if (selectedWorkStyle === 'business_owner') {
                            workStyleMatch = visaEmploymentTypes.includes('freelancer') || visaEmploymentTypes.includes('business_owner');
                        } else {
                            workStyleMatch = visaEmploymentTypes.includes(selectedWorkStyle.toLowerCase());
                        }
                    }
                    return workStyleMatch;
                });
                setFilteredVisas(results);
            }, [selectedNationality, selectedIncomeValue, selectedWorkStyle, visaData]);
            
            const handleConsent = () => {
                localStorage.setItem('ga_consent', 'true');
                setShowBanner(false);
                if (typeof initGoogleAnalytics === 'function') {
                    initGoogleAnalytics();
                }
            };
            
            const openLegalModal = (type) => {
                setLegalModalContent(legalContent[type]);
            };
            
            if (isLoading) {
                return <div className="min-h-screen bg-slate-900 flex justify-center items-center text-white text-xl">Loading Visa Data...</div>;
            }

            if (error) {
                return <div className="min-h-screen bg-slate-900 flex justify-center items-center text-red-400 text-xl">{error}</div>;
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-gray-100 font-sans p-4 sm:p-6 md:p-8">
                    <header className="text-center mb-4 max-w-3xl mx-auto">
                        <h1 className="text-4xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">
                            Visa Match & Clarity Engine
                        </h1>
                        <p className="text-slate-400 mt-2">Instantly find your digital nomad visa options worldwide.</p>
                    </header>

                    <div className="bg-slate-800 shadow-2xl rounded-xl p-6 mb-8 max-w-4xl mx-auto">
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 items-center">
                            <div className="lg:col-span-1">
                                <label htmlFor="nationality" className="block text-sm font-medium text-slate-300 mb-2">üåç Your Passport Country</label>
                                <select id="nationality" value={selectedNationality} onChange={(e) => setSelectedNationality(e.target.value)}
                                    className="w-full p-3 bg-slate-700 border border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white">
                                    <option value="">-- Select Nationality --</option>
                                    {worldNationalities.map(nat => <option key={nat} value={nat}>{nat}</option>)}
                                </select>
                            </div>
                            <div className="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                                 <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">üí∞ Est. Monthly Income (USD)</label>
                                    <div className="flex flex-wrap gap-2">
                                        {incomeLevels.map(level => (
                                            <button key={level.value} onClick={() => setSelectedIncomeValue(level.value)}
                                                className={`px-3 py-2 text-sm rounded-md transition-all ${selectedIncomeValue === level.value ? 'bg-purple-600 text-white shadow-lg ring-2 ring-purple-400' : 'bg-slate-700 hover:bg-slate-600 text-slate-300'}`}>
                                                {level.label}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-sm font-medium text-slate-300 mb-2">üßë‚Äçüíª Work Style</label>
                                    <div className="flex flex-wrap gap-2">
                                        {workStyles.map(style => (
                                            <button key={style.value} onClick={() => setSelectedWorkStyle(style.value)}
                                                className={`flex items-center gap-2 px-3 py-2 text-sm rounded-md transition-all ${selectedWorkStyle === style.value ? 'bg-purple-600 text-white shadow-lg ring-2 ring-purple-400' : 'bg-slate-700 hover:bg-slate-600 text-slate-300'}`}>
                                                <span>{style.icon}</span>{style.label}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <main className="mt-8 max-w-7xl mx-auto">
                        {selectedNationality && (filteredVisas.length > 0 ? (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredVisas.map((visa, index) => (
                                    <VisaCard key={`${visa.country}-${index}`} visa={visa} onViewDetails={() => setModalContent(visa)} />
                                ))}
                            </div>
                        ) : <p className="text-center text-slate-400 py-10">No visas match your current criteria.</p>)}
                        {!selectedNationality && <p className="text-center text-slate-400 py-10 text-lg">Please select your passport country.</p>}
                    </main>
                    {modalContent && <DetailsModal visa={modalContent} onClose={() => setModalContent(null)} />}
                    {legalModalContent && <LegalModal title={legalModalContent.title} content={legalModalContent.content} onClose={() => setLegalModalContent(null)} />}
                    {showBanner && <CookieBanner onAccept={handleConsent} />}
                    <footer className="text-center mt-12 py-4 border-t border-slate-700">
                        <div className="text-sm text-slate-400 space-x-4">
                            <a href="#" onClick={(e) => {e.preventDefault(); openLegalModal('terms')}} className="hover:text-white underline">Terms of Use</a>
                            <a href="#" onClick={(e) => {e.preventDefault(); openLegalModal('privacy')}} className="hover:text-white underline">Privacy Policy</a>
                        </div>
                        <p className="text-xs text-slate-500 mt-2">Always verify information with official sources.</p>
                    </footer>
                </div>
            );
        }
        
        function CookieBanner({ onAccept }) {
            return (
                <div className="fixed bottom-0 left-0 right-0 bg-slate-900/80 backdrop-blur-sm p-4 border-t border-slate-700 z-50">
                    <div className="max-w-4xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
                        <p className="text-sm text-slate-300">
                           This site uses cookies for analytics to improve your experience.
                        </p>
                        <button 
                            onClick={onAccept}
                            className="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg whitespace-nowrap"
                        >
                            Accept
                        </button>
                    </div>
                </div>
            );
        }

        function LegalModal({ title, content, onClose }) {
             return (
                <div className="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4 transition-opacity duration-300" onClick={onClose}>
                    <div className="bg-slate-800 rounded-xl shadow-2xl p-6 md:p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto custom-scrollbar" onClick={e => e.stopPropagation()}>
                        <div className="flex justify-between items-center pb-4 border-b border-slate-700">
                            <h2 className="text-2xl font-bold text-purple-400">{title}</h2>
                            <button onClick={onClose} className="text-slate-400 hover:text-white text-3xl font-light">&times;</button>
                        </div>
                        <div className="mt-6 text-slate-300 text-sm space-y-4 leading-relaxed">
                            {content.split('\n').map((paragraph, index) => <p key={index}>{paragraph}</p>)}
                        </div>
                    </div>
                </div>
            );
        }

        function VisaCard({ visa, onViewDetails }) {
            const bureaucracyAttrs = getScoreAttributes(visa.bureaucracy_score, 'bureaucracy');
            return (
                <div className="bg-slate-800 shadow-xl rounded-lg p-5 flex flex-col justify-between transition-all hover:shadow-purple-500/30 hover:scale-[1.02] duration-300">
                    <div>
                        <h3 className="text-xl font-bold text-purple-400 mb-2">
                            {getCountryFlagEmoji(visa.country)} {visa.country} ‚Äì <span className="font-normal text-slate-300">{visa.visa_name}</span>
                        </h3>
                        <div className="space-y-3 text-sm mb-4">
                            <p>‚è≥<span className="font-semibold"> Duration:</span> {visa.duration_months ? `${visa.duration_months} months` : 'N/A'}</p>
                            <p>üí∏<span className="font-semibold"> Visa Cost:</span> {visa.visa_cost !== null ? `~$${visa.visa_cost}` : 'N/A'}</p>
                            <p className="flex items-center">
                                <span className="font-semibold mr-2">ü§Ø Bureaucracy:</span>
                                <span className={`font-bold ${bureaucracyAttrs.color.replace('bg-', 'text-')}`}>{bureaucracyAttrs.description}</span>
                            </p>
                        </div>
                    </div>
                    <div className="mt-auto">
                        <a href={visa.source_url || '#'} target="_blank" rel="noopener noreferrer" className="text-xs text-slate-400 hover:text-purple-300 block truncate mb-3" title={visa.source_url || 'Source not available'}>
                            {visa.date_of_cost_check ? `Checked: ${visa.date_of_cost_check}` : '\u00A0'}
                        </a>
                        <button className="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition" onClick={onViewDetails}>
                            View Full Details
                        </button>
                    </div>
                </div>
            );
        }

        const ScoreBar = ({ score, label, emoji, type = 'standard' }) => {
            const { description, color, percentage } = getScoreAttributes(score, type);
            return (
                <div className="w-full">
                    <div className="flex justify-between items-center mb-1 text-sm">
                        <span className="font-medium text-slate-300">{emoji} {label}</span>
                        <span className={`font-bold ${color.replace('bg-', 'text-')}`}>{description}</span>
                    </div>
                    <div className="w-full bg-slate-700 rounded-full h-2.5">
                        <div className={`${color} h-2.5 rounded-full`} style={{ width: `${percentage}%` }}></div>
                    </div>
                </div>
            );
        };

        const DetailText = ({ label, value }) => (
            <div className="relative group text-sm">
                 <p className="text-slate-300 truncate">
                    <strong className="text-slate-400">{label}:</strong> {value || 'N/A'}
                </p>
                <div className="absolute bottom-full left-0 w-max max-w-xs mb-2 hidden group-hover:block bg-slate-900 text-white text-xs rounded-lg py-2 px-3 z-10 border border-slate-700 shadow-lg">
                    {value || 'N/A'}
                </div>
            </div>
        );

        function DetailsModal({ visa, onClose }) {
            const sentimentAttrs = getScoreAttributes(visa.nomad_sentiment_score, 'sentiment');
            return (
                <div className="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 p-4 transition-opacity duration-300" onClick={onClose}>
                    <div className="bg-slate-800 rounded-xl shadow-2xl p-6 md:p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto custom-scrollbar" onClick={e => e.stopPropagation()}>
                        <div className="flex justify-between items-center pb-4 border-b border-slate-700">
                            <h2 className="text-2xl font-bold text-purple-400">{getCountryFlagEmoji(visa.country)} {visa.country}</h2>
                            <button onClick={onClose} className="text-slate-400 hover:text-white text-3xl font-light">&times;</button>
                        </div>
                        <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="space-y-6">
                                <div className="bg-slate-900/50 p-4 rounded-lg">
                                    <h3 className="text-lg font-semibold text-slate-200 mb-3">üîë Key Information</h3>
                                    <div className="space-y-2 text-sm text-slate-300">
                                        <p><strong className="text-slate-400">Visa Name:</strong> {visa.visa_name}</p>
                                        <p><strong className="text-slate-400">Duration:</strong> {visa.duration_months ? `${visa.duration_months} months` : 'N/A'}</p>
                                        <p><strong className="text-slate-400">Cost (est.):</strong> {visa.visa_cost !== null ? `~$${visa.visa_cost}` : 'N/A'}</p>
                                    </div>
                                </div>
                                <div className="bg-slate-900/50 p-4 rounded-lg">
                                    <h3 className="text-lg font-semibold text-slate-200 mb-3">‚úÖ Requirements</h3>
                                    <div className="space-y-2 text-sm text-slate-300">
                                        <p><strong className="text-slate-400">Min. Income:</strong> {visa.min_income_usd ? `$${visa.min_income_usd.toLocaleString()}/mo` : 'Not Specified'}</p>
                                        <p><strong className="text-slate-400">Min. Bank Balance:</strong> {visa.min_bank_balance_usd ? `$${visa.min_bank_balance_usd.toLocaleString()}` : 'N/A'}</p>
                                    </div>
                                </div>
                                <div className="bg-slate-900/50 p-4 rounded-lg">
                                    <h3 className="text-lg font-semibold text-slate-200 mb-3">‚öñÔ∏è Tax & Social Security</h3>
                                    <div className="space-y-4 text-sm">
                                        <ScoreBar score={visa.tax_attractiveness} label="Tax Attractiveness" emoji="üí∏"/>
                                        <DetailText label="Tax Details" value={visa.tax_per_income} />
                                        <ScoreBar score={visa.social_security_attractiveness} label="SSN Attractiveness" emoji="ü§ù"/>
                                        <DetailText label="SSN Details" value={visa.social_security_per_income} />
                                    </div>
                                </div>
                            </div>
                            <div className="space-y-6">
                                <div className="bg-slate-900/50 p-4 rounded-lg">
                                    <h3 className="text-lg font-semibold text-slate-200 mb-4">‚≠ê Location Scores</h3>
                                    <div className="space-y-4">
                                        <ScoreBar score={visa.cost_of_living_score} label="Cost of Living" emoji="üí∞" type="cost" />
                                        <ScoreBar score={visa.internet_quality_score} label="Internet" emoji="üåê"/>
                                        <ScoreBar score={visa.safety_score} label="Safety" emoji="üõ°Ô∏è"/>
                                        <ScoreBar score={visa.bureaucracy_score} label="Bureaucracy" emoji="ü§Ø" type="bureaucracy" />
                                    </div>
                                </div>
                                <div className="bg-slate-900/50 p-4 rounded-lg">
                                   <h3 className="text-lg font-semibold text-slate-200 mb-3">‚ù§Ô∏è Nomad Sentiment</h3>
                                   <div className="flex items-center gap-4">
                                       <span className="text-4xl">{sentimentAttrs.emoji}</span>
                                       <div className="w-full">
                                           <p className="text-slate-300 font-bold">{sentimentAttrs.description}</p>
                                           <p className="text-xs text-slate-400">Based on recent online discussions</p>
                                       </div>
                                   </div>
                                </div>
                                {visa.notes && <>
                                    <div className="bg-slate-900/50 p-4 rounded-lg">
                                        <h3 className="text-lg font-semibold text-slate-200 mb-2">üìù Notes</h3>
                                        <p className="text-sm text-slate-300">{visa.notes}</p>
                                    </div>
                                </>}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>
